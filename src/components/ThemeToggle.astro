<label
  for="theme-toggle-checkbox"
  id="theme-toggle"
  class="relative h-8 w-12 cursor-pointer [-webkit-tap-highlight-color:_transparent]"
>
  <input type="checkbox" id="theme-toggle-checkbox" class="peer sr-only" />

  <span class="absolute inset-0 m-auto h-2 rounded-full bg-gray-300 dark:bg-gray-600"></span>

  <span
    class="absolute inset-y-0 start-0 m-auto size-6 rounded-full bg-gray-500 dark:bg-gray-400 transition-all peer-checked:start-6 peer-checked:[&_>_*]:scale-0"
  >
    <span
      class="absolute inset-0 m-auto size-4 rounded-full bg-gray-200 dark:bg-gray-700 transition"
    >
    </span>
  </span>
</label>

<script>
  const themeToggleCheckbox = document.getElementById('theme-toggle-checkbox') as HTMLInputElement;
  const currentTheme = localStorage.getItem('theme');

  if (currentTheme === 'dark') {
    document.documentElement.classList.add('dark');
    themeToggleCheckbox.checked = true;
  }

  themeToggleCheckbox.addEventListener('change', () => {
    document.documentElement.classList.toggle('dark');
    const theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
    localStorage.setItem('theme', theme);
  });
</script>
